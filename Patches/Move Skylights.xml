<?xml version="1.0" encoding="utf-8"?>
<Patch>

    <!-- Move Skylights -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[@ParentName="BasedSkyLight"]/designationCategory</xpath>
        <value>
            <designationCategory>Structure</designationCategory>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[@Name="BasedSkyLight"]/designationCategory</xpath>
        <value>
            <designationCategory>Structure</designationCategory>
        </value>
    </Operation>

    <!-- Remove Skylight Category (if it still exists)-->
    <Operation Class="PatchOperationConditional">
        <xpath>Defs/DesignationCategoryDef[defName="skylights"]</xpath>
        <match Class="PatchOperationRemove">
            <xpath>Defs/DesignationCategoryDef[defName="skylights"]</xpath>
        </match>
    </Operation>

    <!-- Add deconstruct designator to structure category -->
    <Operation Class="PatchOperationAdd">
        <xpath>Defs/DesignationCategoryDef[defName="Structure"]/specialDesignatorClasses</xpath>
        <value>
            <li>Dubs_Skylight.Designator_RemoveSkylights</li>
        </value>
    </Operation>

    <!-- Remove designators from Lighting category if Better Architect Menu is active -->
    <Operation Class="PatchOperationConditional">
        <xpath>Defs/DesignationCategoryDef[defName="Ferny_Lighting"]/specialDesignatorClasses/li[text()="Dubs_Skylight.Designator_RemoveSkylights"]</xpath>
        <match Class="PatchOperationRemove">
            <xpath>Defs/DesignationCategoryDef[defName="Ferny_Lighting"]/specialDesignatorClasses/li[text()="Dubs_Skylight.Designator_RemoveSkylights"]</xpath>
        </match>
    </Operation>

</Patch>